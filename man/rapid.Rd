% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rapid.R
\name{rapid}
\alias{rapid}
\alias{risk_inferential}
\title{RAPID: Risk of Attribute Predictionâ€“Induced Disclosure}
\usage{
rapid(
  original_data,
  synthetic_data,
  quasi_identifiers,
  sensitive_attribute,
  numeric_na_strategy = c("constant", "drop", "median"),
  constant_value = 0,
  model_type = c("lm", "rf"),
  error_metric = c("mae", "rmse", "rmae", "rrmse"),
  epsilon_type = c("Percentage", "Value"),
  epsilon = NULL,
  tau = 1,
  seed = 2025,
  trace = FALSE,
  ...
)

risk_inferential(...)
}
\arguments{
\item{original_data}{The original dataset (data frame).}

\item{synthetic_data}{The synthetic dataset (data frame).}

\item{quasi_identifiers}{Character vector of quasi-identifiers used for inference.}

\item{sensitive_attribute}{Name of the sensitive variable to be predicted.}

\item{model_type}{Model type to use for inference: "lm" (linear) or "rf" (random forest).}

\item{error_metric}{Error metric for continuous variables: "mae", "rmse", "rmae", or "rrmse".}

\item{epsilon_type}{Either "Percentage" or "Value".}

\item{epsilon}{Threshold for continuous attributes (numeric).}

\item{tau}{Threshold for categorical risk (numeric).}

\item{seed}{Optional random seed.}

\item{trace}{Logical; whether to print diagnostic messages.}

\item{...}{Additional arguments passed to model fitting.}
}
\value{
A list containing:
- For continuous: proportion and subset of records within error tolerance.
- For categorical: RAPID metric and supporting confidence measures.
}
\description{
Assess inferential disclosure risk for a sensitive variable in a synthetic dataset using the RAPID metric.
This function trains a predictive model on synthetic data using quasi-identifiers, then evaluates attribute inference risk
by scoring the model on the original data. Supports continuous and categorical sensitive variables.
}
\examples{
# Load required libraries
if (!requireNamespace("ranger", quietly = TRUE)) install.packages("ranger")
library(ranger)

# Generate toy original dataset
set.seed(2025)
n <- 100
original_data <- data.frame(
  age = sample(20:70, n, replace = TRUE),
  income = round(rnorm(n, mean = 50000, sd = 10000)),
  education = factor(sample(c("low", "medium", "high"), n, replace = TRUE)),
  health_score = round(rnorm(n, mean = 75, sd = 10), 1)
)

# Generate synthetic dataset with noise
synthetic_data <- data.frame(
  age = original_data$age + sample(-2:2, n, replace = TRUE),
  income = round(original_data$income * runif(n, 0.9, 1.1)),
  education = factor(sample(c("low", "medium", "high"), n, replace = TRUE)),
  health_score = round(original_data$health_score + rnorm(n, 0, 5), 1)
)

# Match factor levels
synthetic_data$education <- factor(synthetic_data$education, levels = levels(original_data$education))

# Run RAPID for continuous sensitive attribute
result <- rapid(
  original_data = original_data,
  synthetic_data = synthetic_data,
  quasi_identifiers = c("age", "income", "education"),
  sensitive_attribute = "health_score",
  model_type = "rf",
  error_metric = "rmse",                  # root mean squared error
  epsilon_type = "Percentage",
  epsilon = 10,                           # 10\% relative error threshold
  trace = TRUE
)

# Output
print(result$risk$rows_risk_n)
print(result$risk$rows_risk_p)
head(result$risk$rows_risk_df)

# ---- Categorical sensitive variable example ----
set.seed(2025)
original_data_cat <- data.frame(
  age = sample(20:70, n, replace = TRUE),
  income = round(rnorm(n, 50000, 10000)),
  education = sample(c("low", "medium", "high"), n, replace = TRUE),
  disease_status = factor(sample(c("healthy", "diabetic", "hypertensive"),
    n, replace = TRUE, prob = c(0.6, 0.2, 0.2)))
)

synthetic_data_cat <- original_data_cat
synthetic_data_cat$age <- synthetic_data_cat$age + sample(-2:2, n, replace = TRUE)
synthetic_data_cat$income <- round(synthetic_data_cat$income * runif(n, 0.9, 1.1))
synthetic_data_cat$education <- sample(c("low", "medium", "high"), n, replace = TRUE)
synthetic_data_cat$disease_status <- factor(sample(c("healthy", "diabetic", "hypertensive"),
    n, replace = TRUE, prob = c(0.55, 0.25, 0.2)))

# Run RAPID for categorical sensitive attribute
result_cat <- rapid(
  original_data = original_data_cat,
  synthetic_data = synthetic_data_cat,
  quasi_identifiers = c("age", "income", "education"),
  sensitive_attribute = "disease_status",
  model_type = "rf",
  tau = 1.2
)

# Print result summary
str(result_cat)

}
\author{
Oscar Thees, Matthias Templ
}
