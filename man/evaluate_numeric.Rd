% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/evaluate_numeric.R
\name{evaluate_numeric}
\alias{evaluate_numeric}
\title{Evaluate Continuous Attribute Inference Risk (RAPID)}
\usage{
evaluate_numeric(
  A,
  B,
  original_data,
  num_error_metric = c("symmetric", "stabilised_relative", "absolute"),
  num_epsilon,
  num_epsilon_scale = c("proportion", "percent"),
  num_delta = 0.01,
  return_all_records = FALSE
)
}
\arguments{
\item{A}{Vector of true sensitive values (numeric).}

\item{B}{Vector of predicted values (numeric), from a model trained on synthetic data.}

\item{original_data}{Data frame of original data (for reporting records with high-risk predictions).}

\item{num_error_metric}{Error metric: one of \code{"symmetric"} (default, recommended),
\code{"stabilised_relative"}, or \code{"absolute"}. See Details.}

\item{num_epsilon}{Numeric threshold. Interpretation depends on \code{num_error_metric}.
For relative metrics, this is a relative error threshold; for \code{"absolute"}, this is
an absolute error threshold on the original scale.}

\item{num_epsilon_scale}{Scale of \code{num_epsilon} for relative metrics:
\code{"proportion"} means \code{0.05} corresponds to 5\%, and \code{"percent"} means \code{5}
corresponds to 5\%. Only used when \code{num_error_metric} is \code{"symmetric"} or
\code{"stabilised_relative"}.}

\item{num_delta}{Smoothing constant to prevent division by zero for relative metrics
(default 0.01). Only used for \code{"symmetric"} and \code{"stabilised_relative"}.}

\item{return_all_records}{Logical; if \code{TRUE}, return all records with their risk
status. If \code{FALSE} (default), return only at-risk records.}
}
\value{
A list containing:
\describe{
  \item{confidence_rate}{Proportion of records at risk (between 0 and 1).}
  \item{n_at_risk}{Number of records with prediction errors below the threshold.}
  \item{percentage}{Percentage of at-risk records (0--100 scale).}
  \item{rows_risk_df}{Data frame of records (all or at-risk only, depending on
    \code{return_all_records}) with original values, predictions, error metrics,
    and risk status. For relative metrics the error column is
    \code{symmetric_error} or \code{stabilised_relative_error}; for absolute it is
    \code{absolute_error}. The table also includes \code{num_epsilon_input} and the
    converted \code{num_epsilon} actually used for the comparison.}
}
}
\description{
Computes RAPID disclosure risk for a continuous sensitive attribute by evaluating
how closely synthetic-trained models can predict true values. Risk is measured
by the proportion of records for which prediction errors fall below a chosen
threshold.
}
\details{
Three error metrics are available:
\itemize{
  \item \code{symmetric}: Symmetric percentage error (recommended). Treats predicted and
    true values symmetrically:
    \eqn{2|y - \hat{y}| / (|y| + |\hat{y}| + 2\delta)}.
  \item \code{stabilised_relative}: Stabilised relative error:
    \eqn{|y - \hat{y}| / (|y| + \delta)}.
  \item \code{absolute}: Absolute error:
    \eqn{|y - \hat{y}|}.
}

For relative metrics (\code{"symmetric"} and \code{"stabilised_relative"}), errors are computed
on a 0--1 scale. The threshold \code{num_epsilon} is interpreted according to
\code{num_epsilon_scale}:
\itemize{
  \item \code{num_epsilon_scale = "proportion"}: use \code{0.05} for 5\%
  \item \code{num_epsilon_scale = "percent"}: use \code{5} for 5\% (internally converted to 0.05)
}
}
\examples{
\dontrun{
# Relative metric (symmetric), epsilon given in percent (5 means 5\%)
result <- evaluate_numeric(
  A = original_data$income,
  B = predictions,
  original_data = original_data,
  num_error_metric = "symmetric",
  num_epsilon = 5,
  num_epsilon_scale = "percent"
)

# Relative metric, epsilon given as proportion (0.05 means 5\%)
result_prop <- evaluate_numeric(
  A = original_data$income,
  B = predictions,
  original_data = original_data,
  num_error_metric = "symmetric",
  num_epsilon = 0.05,
  num_epsilon_scale = "proportion"
)

# Absolute threshold (e.g., income in dollars)
result_abs <- evaluate_numeric(
  A = original_data$income,
  B = predictions,
  original_data = original_data,
  num_error_metric = "absolute",
  num_epsilon = 1000,
  return_all_records = TRUE
)
}

}
